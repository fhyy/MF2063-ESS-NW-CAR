<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESS-NW-CAR: ard-speed/ard-speed.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ESS-NW-CAR
   </div>
   <div id="projectbrief">Embedded Self-adaptive Services</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_8ab3e2ad30236f5146ff71cfaf3e89da.html">ard-speed</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ard-speed.ino File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;SPI.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ard-speed.ino:</div>
<div class="dyncontent">
<div class="center"><img src="ard-speed_8ino__incl.png" border="0" usemap="#ard-speed_2ard-speed_8ino" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top"><a id="a4fc01d736fe50cf5b977f755b675f11d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ard-speed_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the setup, this is run once before we enter the loop function which never returns. Any code that should run once on boot before we assume normal behaviour should be put in here. <br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top"><a id="afe461d27b9c48d5921c00d521181f12f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ard-speed_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the main loop that is continously itterated while the arduino is powered on. Any code that should be run contiously should be put in here. <br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2973d8c2f8d00850169fe91fde6a4379"><td class="memItemLeft" align="right" valign="top"><a id="a2973d8c2f8d00850169fe91fde6a4379"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ard-speed_8ino.html#a2973d8c2f8d00850169fe91fde6a4379">startSPI</a> ()</td></tr>
<tr class="memdesc:a2973d8c2f8d00850169fe91fde6a4379"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the SPI such that the arduino is configured as a slave serving the BBB master. <br /></td></tr>
<tr class="separator:a2973d8c2f8d00850169fe91fde6a4379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9cad97352f5ba9bbd800446131125a6"><td class="memItemLeft" align="right" valign="top"><a id="af9cad97352f5ba9bbd800446131125a6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ard-speed_8ino.html#af9cad97352f5ba9bbd800446131125a6">ISR</a> (SPI_STC_vect)</td></tr>
<tr class="memdesc:af9cad97352f5ba9bbd800446131125a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI interrupt routine, interrupts are generated by the master enabling the arduinos Slave Select (SS) port by setting it to low. This means we can enter this interrupt routine and send the desired data. <br /></td></tr>
<tr class="separator:af9cad97352f5ba9bbd800446131125a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75d4ac60861b84f1203e0e59c193c76e"><td class="memItemLeft" align="right" valign="top"><a id="a75d4ac60861b84f1203e0e59c193c76e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ard-speed_8ino.html#a75d4ac60861b84f1203e0e59c193c76e">irInterruptHandler</a> ()</td></tr>
<tr class="memdesc:a75d4ac60861b84f1203e0e59c193c76e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IR-sensor interrupt handler. <br /></td></tr>
<tr class="separator:a75d4ac60861b84f1203e0e59c193c76e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a003f5d519d8676a713825f2e9e1154a7"><td class="memItemLeft" align="right" valign="top"><a id="a003f5d519d8676a713825f2e9e1154a7"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ard-speed_8ino.html#a003f5d519d8676a713825f2e9e1154a7">calculateSpeed</a> ()</td></tr>
<tr class="memdesc:a003f5d519d8676a713825f2e9e1154a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates speed using elapsed time and distance traveled. <br /></td></tr>
<tr class="separator:a003f5d519d8676a713825f2e9e1154a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0f7724ec08ec3f5915272cbfeb592dfb"><td class="memItemLeft" align="right" valign="top"><a id="a0f7724ec08ec3f5915272cbfeb592dfb"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_STEPS</b> = 1</td></tr>
<tr class="separator:a0f7724ec08ec3f5915272cbfeb592dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af167897e96068e10763ce10733483171"><td class="memItemLeft" align="right" valign="top"><a id="af167897e96068e10763ce10733483171"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>TIMEOUT_TIME</b> = 1000</td></tr>
<tr class="separator:af167897e96068e10763ce10733483171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad52170a3ceb9aee2ca2f633c62776b94"><td class="memItemLeft" align="right" valign="top"><a id="ad52170a3ceb9aee2ca2f633c62776b94"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>WHEEL_RADIUS_MM</b> = 55</td></tr>
<tr class="separator:ad52170a3ceb9aee2ca2f633c62776b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c89f63a6b9800aae56c895d3c0af3b4"><td class="memItemLeft" align="right" valign="top"><a id="a8c89f63a6b9800aae56c895d3c0af3b4"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>WHEEL_CIRCUMFERENCE</b> = 2 * PI * WHEEL_RADIUS_MM</td></tr>
<tr class="separator:a8c89f63a6b9800aae56c895d3c0af3b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1305a2990213e609b6e5272bacc3d1de"><td class="memItemLeft" align="right" valign="top"><a id="a1305a2990213e609b6e5272bacc3d1de"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>STEPS_PER_ROTATION</b> = 10</td></tr>
<tr class="separator:a1305a2990213e609b6e5272bacc3d1de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4b8d55bde12a7ec3f5ede3232b674b1"><td class="memItemLeft" align="right" valign="top"><a id="ac4b8d55bde12a7ec3f5ede3232b674b1"></a>
float const&#160;</td><td class="memItemRight" valign="bottom"><b>DISTANCE_PER_STEP</b> = (float)WHEEL_CIRCUMFERENCE / (float)STEPS_PER_ROTATION</td></tr>
<tr class="separator:ac4b8d55bde12a7ec3f5ede3232b674b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ac75e002fe18d5c545de07e5333aa3a"><td class="memItemLeft" align="right" valign="top"><a id="a8ac75e002fe18d5c545de07e5333aa3a"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>IR_PIN</b> = 2</td></tr>
<tr class="separator:a8ac75e002fe18d5c545de07e5333aa3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4093d4b0bbb19a7b7b0ab1400bf623e5"><td class="memItemLeft" align="right" valign="top"><a id="a4093d4b0bbb19a7b7b0ab1400bf623e5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>timeoutFlag</b> = true</td></tr>
<tr class="separator:a4093d4b0bbb19a7b7b0ab1400bf623e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4ae7205573977222eadd0795db193e2"><td class="memItemLeft" align="right" valign="top"><a id="ab4ae7205573977222eadd0795db193e2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>steps</b> = 0</td></tr>
<tr class="separator:ab4ae7205573977222eadd0795db193e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e06ecdad9f318fafbb0b28370c3cfef"><td class="memItemLeft" align="right" valign="top"><a id="a0e06ecdad9f318fafbb0b28370c3cfef"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><b>startTime</b> = 0</td></tr>
<tr class="separator:a0e06ecdad9f318fafbb0b28370c3cfef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a591f10336dfca5844094ebf656f5a0cb"><td class="memItemLeft" align="right" valign="top"><a id="a591f10336dfca5844094ebf656f5a0cb"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><b>stopTime</b> = 0</td></tr>
<tr class="separator:a591f10336dfca5844094ebf656f5a0cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8151acb3eb15cc87572029c33dee53b2"><td class="memItemLeft" align="right" valign="top"><a id="a8151acb3eb15cc87572029c33dee53b2"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><b>elapsedTime</b> = 0</td></tr>
<tr class="separator:a8151acb3eb15cc87572029c33dee53b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47df239876c0138389742577441ef89"><td class="memItemLeft" align="right" valign="top"><a id="aa47df239876c0138389742577441ef89"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>irVal</b> = 0</td></tr>
<tr class="separator:aa47df239876c0138389742577441ef89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9455f5d6c5bb5ad88d0f2c610712f97f"><td class="memItemLeft" align="right" valign="top"><a id="a9455f5d6c5bb5ad88d0f2c610712f97f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>speedValue</b></td></tr>
<tr class="separator:a9455f5d6c5bb5ad88d0f2c610712f97f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
